---
import BaseLayout from '../layouts/BaseLayout.astro';
import Chat from '../components/Chat.tsx';
import { getFeatureFlag } from '../lib/launchdarkly';

export const prerender = false;

const isChatEnabled = await getFeatureFlag('ai-chat', false);

if (!isChatEnabled) {
  return Astro.redirect('/', 307);
}
---

<BaseLayout title="Chat">
  <main class="py-12">
    <h1 class="text-3xl font-bold text-center mb-8">AI Chat</h1>
    <Chat client:load />
  </main>
</BaseLayout>
